**什么是DDD？**

> DDD是Eric Evans在2003年出版的《领域驱动设计：软件核心复杂性应对之道》（Domain-Driven Design: Tackling Complexity in the Heart of Software）一书中提出的具有划时代意义的重要概念。
>
> DDD通过统一语言、领域模型、领域划分和服务划分等一系列手段来降低软件复杂度**。** 

**什么是领域事件？**

领域事件是领域内**已发生**且对其它领域**有影响**的事件。

**为什么需要领域事件？**

![image-20200920210240654](/Users/jacksu/Desktop/File/resource/image/notePics/image-20200920210240654.png)

DDD实践中非常重要的一点是对复杂系统的领域划分，合理的划分可以让复杂的事情变得有序，有序即是系统的熵降低，所以DDD是软件核心复杂性的应对之道。

领域的理想状态是**高内聚低耦合**，领域事件就是实现高内聚低耦合的重要工具。当A领域发生了事件E，会影响B领域时，A领域不用关心这种影响是什么，而只用发布领域事件E，领域B要负责监听E类领域事件，并作出响应。



## 目标

通过前面的分析，我们希望系统内有一套支持领域事件的组件，通过该组件需要实现以下目标：

- 新领域事件的定义
- 领域事件的发布与监听
- 健壮性要求：可重试、可追踪、可监控



## 实践

我们的项目是基于SpringBoot，因此领域事件组件是基于Spring的ApplicationListener实现。其主要的类有：

领域事件（DomainEvent）、领域事件发布者（DomainEventPublisherImpl）、领域事件监听handler（DomainEventHandler）

DomainEvent是领域事件模板类，这样设计是为了

### 领域事件的抽象与一对多监听的冲突

系统一般会存在多个领域，每个领域会发送不同的领域事件，组件需要收拢这些不同领域事件的发布，因此需要对领域事件进行模板抽象。即A领域需要发布α事件，B领域需要发布β事件，α事件和β事件都需要继承我们的模板领域事件。

